steps:
  # Step 1: Build Docker image
  - name: 'gcr.io/cloud-builders/docker'
    args: [
      'build',
      '--build-arg',
      'NEXT_PUBLIC_PROJECT_ID=${_NEXT_PUBLIC_PROJECT_ID}',
      '-t',
      'europe-west3-docker.pkg.dev/${_PROJECT_ID}/${_SERVICE}/${_TAG}',
      '.'
    ]

  # Step 2: Push Docker image to Container Registry
  - name: 'gcr.io/cloud-builders/docker'
    args: ['push', 'europe-west3-docker.pkg.dev/${_PROJECT_ID}/${_SERVICE}/${_TAG}']

# Optional: Specify substitutions for dynamic values
substitutions:
  _SERVICE: $SERVICE
  _PROJECT_ID: $PROJECT_ID
  _NEXT_PUBLIC_PROJECT_ID: $NEXT_PUBLIC_PROJECT_ID
  _TAG: 'latest'
