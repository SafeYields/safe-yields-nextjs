steps:
- name: 'gcr.io/cloud-builders/docker'
  args: [
    'build',
    '--build-arg',
    'NEXT_PUBLIC_PROJECT_ID=${_NEXT_PUBLIC_PROJECT_ID}',
    '--build-arg',
    'OPENAI_API_KEY=${_OPENAI_API_KEY}',
    '--build-arg',
    'DATABASE_URL=${_DATABASE_URL}',
    '--build-arg',
    'TAVILY_API_KEY=${_TAVILY_API_KEY}',
    '.'
  ]

substitutions:
  _SERVICE: $SERVICE
  _PROJECT_ID: $PROJECT_ID
  _NEXT_PUBLIC_PROJECT_ID: $NEXT_PUBLIC_PROJECT_ID
  _OPENAI_API_KEY: $OPENAI_API_KEY
  _DATABASE_URL: $DATABASE_URL
  _TAVILY_API_KEY: $TAVILY_API_KEY
